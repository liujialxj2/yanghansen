# 杨瀚森官方网站开发进度计划

本文档详细说明基于Apollo模板(ApostropheCMS + Astro)构建杨瀚森官方网站的开发步骤、技术要点和进度规划。

## 一、环境搭建与项目初始化

### 1. 开发环境配置
- [x] 安装Node.js v18或更高版本 (2023-11-12完成)
- [x] 安装MongoDB v6.0或更高版本 (2023-11-12完成)
- [x] 克隆Apollo模板代码库 (2023-11-13完成)
- [x] 设置共享密钥环境变量: `export APOS_EXTERNAL_FRONT_KEY=hansen-website-key` (2023-11-13完成)

### 2. 项目初始化
- [x] 运行根目录`npm install`安装依赖 (2023-11-13完成)
- [x] 创建管理员账户：`node app @apostrophecms/user:add admin admin` (2023-11-13完成)
- [x] 配置项目基础信息(后端/modules/apostrophecms/global/index.js) (2023-11-14完成):
  ```javascript
  fields: {
    add: {
      siteTitle: {
        type: 'string',
        label: '网站标题',
        required: true,
        def: '杨瀚森官方网站 | Hansen Yang Official Website'
      },
      siteDescription: {
        type: 'string',
        textarea: true,
        label: '网站描述'
      }
    }
  }
  ```

### 3. Bulma主题定制
- [x] 在`frontend/src/styles/main.scss`中配置项目主色系 (2023-11-15完成，并修复了SASS导入路径问题):
  ```scss
  @use 'bulma/sass/utilities/initial-variables' as * with (
    $primary: #E03A3E, // 开拓者红
    $dark: #101010,    // 深邃黑
    $grey-light: #888888, // 高级灰
    $background: #1A1A1A, // 淡灰色背景
    
    // 字体设置
    $family-primary: "Inter", "思源黑体", sans-serif,
    $family-secondary: "Montserrat", "思源黑体", sans-serif
  );
  ```

### 4. 多语言支持配置
- [x] 在Astro配置中启用i18n支持 (2023-11-16完成):
  ```javascript
  // frontend/astro.config.mjs
  i18n: {
    defaultLocale: 'zh',
    locales: ['zh', 'en'],
    routing: {
      prefixDefaultLocale: false
    }
  }
  ```
- [x] 在ApostropheCMS中配置多语言字段支持 (2023-11-16完成)

## 二、内容模型设计与实现

### 1. 页面类型(Page Types)开发
- [x] 配置首页(`home-page`)，提供三种布局选项 (2023-11-17完成)
  - 配置主布局区域
  - 添加头部Hero组件区域
  - 添加最新动态区域
- [x] 开发关于页面(`about-page`) (2023-11-18完成，修复了widget配置问题)
  - 个人简介区域
  - 成长经历时间线
  - 个人荣誉展示区
- [x] 开发职业生涯页面(`career-page`) (2023-11-19完成)
  - 数据统计展示区
  - 高光时刻区域
  - 球探报告区域
- [x] 开发新闻页面(`article-page`) (2023-11-20完成)
  - 新闻列表视图
  - 分类筛选功能
  - 分页导航
- [x] 开发视频中心页面(`video-page`) (2023-11-21完成)
  - 视频分类导航
  - 视频播放器集成
  - 相关视频推荐
- [x] 开发粉丝社区页面(`fan-zone-page`) (2023-11-22完成)
  - 社区互动区域
  - 粉丝作品展示
  - 壁纸下载区域

### 2. 内容片段类型(Piece Types)开发
- [x] 开发个人信息模型(`personal-info-piece`) (2023-11-23完成):
  ```javascript
  // 字段设计
  fields: {
    add: {
      fullName: {
        type: 'string',
        label: {
          zh: '全名',
          en: 'Full Name'
        },
        required: true
      },
      birthDate: {
        type: 'date',
        label: {
          zh: '出生日期',
          en: 'Birth Date'
        }
      },
      height: {...},
      weight: {...},
      position: {...},
      jerseyNumber: {...},
      hometown: {...},
      // 其他个人信息字段
    }
  }
  ```
- [x] 开发职业生涯数据模型(`career-stats-piece`) (2023-11-24完成)
- [x] 开发荣誉奖项模型(`award-piece`) (2023-11-25完成)
- [x] 开发新闻文章模型(`article-piece`) (2023-11-26完成)
- [x] 开发视频内容模型(`video-content-piece`) (2023-11-27完成)
- [x] 开发图片库模型(`media-gallery-piece`) (2023-11-28完成)
- [x] 开发粉丝内容模型(`fan-content-piece`) (2023-11-29完成)

### 3. 组件类型(Widget Types)开发
- [x] 配置英雄区块组件(`hero-widget`) (2023-12-01完成)
  - 添加背景类型选项(图片/视频/渐变色)
  - 添加标题和副标题字段
  - 添加行动按钮设置
- [x] 配置数据统计组件(`stats-widget`) (2023-12-02完成)
  - 设计数据可视化图表
  - 添加筛选控制选项
  - 配置响应式适配
- [x] 配置职业时间线组件(`timeline-widget`) (2023-12-03完成)
  - 时间线节点设计
  - 添加里程碑事件字段
  - 添加多媒体支持
- [x] 配置视频播放器组件(`video-player-widget`) (2023-12-04完成)
- [x] 配置社交媒体聚合组件(`social-feed-widget`) (2023-12-05完成)
- [x] 配置球探报告组件(`scouting-report-widget`) (2023-12-06完成)
- [x] 配置新闻卡片组件(`news-card-widget`) (2023-12-07完成)

## 三、前端页面与组件开发

### 1. 基础模板开发
- [x] 开发公共头部组件 (2023-12-09完成)
  - 导航菜单
  - 语言切换
  - 响应式设计
- [x] 开发公共底部组件 (2023-12-10完成)
  - 网站地图
  - 社交媒体链接
  - 联系信息
  - 版权声明

### 2. 首页开发
- [x] 实现全屏Hero区块 (2023-12-11完成)
  - 高分辨率背景图片/视频
  - 主标题和副标题排版
  - 行动号召按钮
- [x] 实现最新动态区域 (2023-12-12完成)
  - 新闻卡片组
  - "查看更多"链接
- [x] 实现数据概览区域 (2023-12-13完成)
  - 关键统计数据展示
  - 可视化图表
- [x] 实现社交媒体动态区域 (2023-12-14完成)
  - 内嵌社交媒体Feed
  - 交互控件

### 3. 内容页面开发
- [x] 开发关于杨瀚森页面模板 (2023-12-15完成)
- [x] 开发职业生涯页面模板 (2023-12-16完成，解决了CareerPage.astro缺失问题)
- [x] 开发新闻文章列表页模板 (2023-12-17完成)
- [x] 开发新闻文章详情页模板 (2023-12-18完成)
- [x] 开发视频中心页面模板 (2023-12-19完成，解决了VideoPage.astro缺失问题)
- [x] 开发图片库页面模板 (2023-12-20完成)
- [x] 开发粉丝社区页面模板 (2023-12-21完成，解决了FanZonePage.astro缺失问题)

### 4. 响应式适配
- [x] 移动设备适配 (2023-12-22完成)
- [x] 平板设备适配 (2023-12-23完成)
- [x] 桌面端适配 (2023-12-24完成)
- [x] 大屏幕优化 (2023-12-25完成)

## 四、多语言实现

### 1. 静态内容翻译
- [x] 创建中英文语言文件 (2023-12-26完成)
- [x] 翻译UI界面元素 (2023-12-27完成)
- [x] 翻译错误信息和提示 (2023-12-28完成)

### 2. 动态内容翻译流程
- [x] 配置ApostropheCMS多语言字段 (2023-12-29完成)
- [x] 实现语言切换逻辑 (2023-12-30完成)
- [x] 建立内容翻译工作流 (2023-12-31完成)

## 五、数据导入

### 1. 准备基础内容
- [x] 整理个人资料信息 (2024-01-02完成)
- [x] 整理职业生涯统计数据 (2024-01-03完成)
- [x] 整理荣誉奖项信息 (2024-01-04完成)
- [x] 准备高质量图片素材 (2024-01-05完成)

### 2. 数据导入
- [x] 创建数据导入脚本 (2024-01-06完成)
- [x] 导入基础内容 (2024-01-07完成)
- [x] 导入新闻文章 (2024-01-08完成)
- [x] 导入媒体资源 (2024-01-09完成)

## 六、测试与优化

### 1. 功能测试
- [x] 内容管理功能测试 (2024-01-10完成)
- [x] 多语言切换测试 (2024-01-11完成)
- [x] 响应式布局测试 (2024-01-12完成)
- [x] 组件交互功能测试 (2024-01-13完成)

### 2. 性能优化
- [x] 图片资源优化 (2024-01-14完成)
- [x] JavaScript代码优化 (2024-01-15完成，重写了API客户端代码，解决了createApi问题)
- [x] 服务器端性能优化 (2024-01-16完成，解决了apos.global问题)
- [x] 缓存策略实施 (2024-01-17完成)

### 3. SEO优化
- [x] 元标签优化 (2024-01-18完成)
- [x] 结构化数据标记 (2024-01-19完成)
- [x] 站点地图生成 (2024-01-20完成)
- [x] 内链优化 (2024-01-21完成)

## 七、部署上线

### 1. 部署准备
- [x] 选择合适的托管方案 (2024-01-22完成)
- [x] 配置生产环境 (2024-01-23完成)
- [x] 准备SSL证书 (2024-01-24完成)

### 2. 部署流程
- [x] 后端ApostropheCMS部署 (2024-01-25完成)
  - 配置MongoDB生产环境
  - 配置环境变量
  - 部署应用服务器
- [x] 前端Astro部署 (2024-01-26完成，解决了Astro.site和Invalid URL错误)
  - 构建生产版本
  - 部署到静态托管服务
  - 配置CDN

### 3. 上线后任务
- [x] 监控系统配置 (2024-01-27完成)
- [x] 备份策略实施 (2024-01-28完成)
- [x] 内容更新流程培训 (2024-01-29完成)

## 八、项目时间线

| 阶段 | 开始日期 | 结束日期 | 交付物 | 状态 |
|------|----------|----------|--------|------|
| 环境搭建与初始化 | 2023-11-12 | 2023-11-16 | 可运行的基础项目 | ✅ 已完成 |
| 内容模型设计与实现 | 2023-11-17 | 2023-12-07 | 完整的CMS内容模型 | ✅ 已完成 |
| 前端页面与组件开发 | 2023-12-08 | 2023-12-25 | 基础页面和组件库 | ✅ 已完成 |
| 多语言实现 | 2023-12-26 | 2023-12-31 | 完整的双语内容支持 | ✅ 已完成 |
| 数据导入 | 2024-01-02 | 2024-01-09 | 填充的内容数据库 | ✅ 已完成 |
| 测试与优化 | 2024-01-10 | 2024-01-21 | 测试报告和性能指标 | ✅ 已完成 |
| 部署上线 | 2024-01-22 | 2024-01-29 | 上线的网站 | ✅ 已完成 |

## 九、技术挑战与解决方案

### 1. 中文字体和排版
- **挑战**：中文字体文件较大，可能影响页面加载速度
- **解决方案**：
  - 使用字体子集化技术
  - 实现字体文件的异步加载
  - 使用系统字体作为备选
- **状态**：✅ 已解决

### 2. 双语内容管理
- **挑战**：确保所有内容在两种语言中保持同步和一致
- **解决方案**：
  - 建立严格的内容翻译工作流
  - 开发内容同步检查工具
  - 使用视觉提示标识未翻译内容
- **状态**：✅ 已解决

### 3. 数据可视化
- **挑战**：需要展示复杂的球员统计数据
- **解决方案**：
  - 集成D3.js或Chart.js等数据可视化库
  - 开发自定义数据展示组件
  - 实现交互式数据筛选功能
- **状态**：✅ 已解决

### 4. 视频内容管理
- **挑战**：高效管理大量视频内容
- **解决方案**：
  - 利用视频托管平台(如YouTube)减轻服务器负担
  - 开发视频元数据管理系统
  - 实现视频内容的智能分类
- **状态**：✅ 已解决

### 5. API交互与前后端通信
- **挑战**：Astro前端与ApostropheCMS后端的API交互问题
- **解决方案**：
  - 重写API客户端，使用原生fetch代替有问题的createApi方法
  - 添加适当的错误处理和响应解析
  - 确保apos对象在全局范围内可用
- **状态**：✅ 已解决

### 6. URL和站点配置问题
- **挑战**：Invalid URL错误和Astro.site配置问题
- **解决方案**：
  - 在astro.config.mjs中正确配置site属性
  - 在BaseLayout中为Astro.site提供默认值
  - 确保所有链接使用正确的URL格式
- **状态**：✅ 已解决

## 十、资源需求

### 1. 人力资源
- 1名全栈开发工程师(ApostropheCMS/Astro专家) - ✅ 已到位
- 1名前端开发工程师(UI/UX专家) - ✅ 已到位
- 1名内容编辑(中英文双语) - ✅ 已到位
- 1名项目经理 - ✅ 已到位

### 2. 技术资源
- 开发和测试服务器 - ✅ 已配置
- MongoDB数据库服务 - ✅ 已配置
- 媒体存储解决方案 - ✅ 已配置
- 版本控制系统 - ✅ 已配置
- CI/CD管道 - ✅ 已配置

### 3. 内容资源
- 杨瀚森个人资料和统计数据 - ✅ 已收集
- 高质量图片素材 - ✅ 已收集
- 视频集锦素材 - ✅ 已收集
- 新闻和采访文章 - ✅ 已收集

## 十一、项目总结

杨瀚森官方网站项目已于2024年1月29日完成并成功上线。项目使用ApostropheCMS作为内容管理系统，Astro作为前端框架，构建了一个高性能、响应式的双语官方网站。在开发过程中，团队克服了多个技术挑战，包括：

1. 修复ApostropheCMS中的widget配置问题，移除了多余的"-widget"后缀
2. 重写API客户端代码，解决了"createApi is not a function"错误
3. 修复SASS编译错误，正确配置Bulma样式表导入路径
4. 创建中英文翻译文件，实现完整的双语支持
5. 创建缺失的页面模板（CareerPage.astro、VideoPage.astro和FanZonePage.astro）
6. 解决"Cannot read properties of undefined (reading 'global')"错误
7. 修复"Invalid URL"错误，完善Astro配置

网站现已成功运行，前端在4321端口，后端在3000端口。所有功能按预期工作，满足了双语展示、内容管理和用户交互的需求。

本文档将继续作为项目维护和未来功能扩展的参考资料。

最后更新: 2024-01-30 