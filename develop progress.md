# 杨瀚森官方网站开发进度计划

本文档详细说明基于Apollo模板(ApostropheCMS + Astro)构建杨瀚森官方网站的开发步骤、技术要点和进度规划。
**更新说明**: 根据项目需求，我们采用混合式内容管理方案，将网站内容分为"静态实现"和"动态内容管理"两部分，以优化开发流程和网站性能。

## 一、环境搭建与项目初始化

### 1. 开发环境配置
- [x] 安装Node.js v18或更高版本 (2023-11-12完成)
- [x] 安装MongoDB v6.0或更高版本 (2023-11-12完成)
- [x] 克隆Apollo模板代码库 (2023-11-13完成)
- [x] 设置共享密钥环境变量: `export APOS_EXTERNAL_FRONT_KEY=hansen-website-key` (2023-11-13完成)

### 2. 项目初始化
- [x] 运行根目录`npm install`安装依赖 (2023-11-13完成)
- [x] 创建管理员账户：`node app @apostrophecms/user:add admin admin` (2023-11-13完成)
- [x] 配置项目基础信息(后端/modules/apostrophecms/global/index.js) (2023-11-14完成):
  ```javascript
  fields: {
    add: {
      siteTitle: {
        type: 'string',
        label: '网站标题',
        required: true,
        def: '杨瀚森官方网站 | Hansen Yang Official Website'
      },
      siteDescription: {
        type: 'string',
        textarea: true,
        label: '网站描述'
      }
    }
  }
  ```

### 3. Bulma主题定制
- [x] 在`frontend/src/styles/main.scss`中配置项目主色系 (2023-11-15完成，并修复了SASS导入路径问题):
  ```scss
  @use 'bulma/sass/utilities/initial-variables' as * with (
    $primary: #E03A3E, // 开拓者红
    $dark: #101010,    // 深邃黑
    $grey-light: #888888, // 高级灰
    $background: #1A1A1A, // 淡灰色背景
    
    // 字体设置
    $family-primary: "Inter", "思源黑体", sans-serif,
    $family-secondary: "Montserrat", "思源黑体", sans-serif
  );
  ```

### 4. 多语言支持配置
- [x] 在Astro配置中启用i18n支持 (2023-11-16完成):
  ```javascript
  // frontend/astro.config.mjs
  i18n: {
    defaultLocale: 'zh',
    locales: ['zh', 'en'],
    routing: {
      prefixDefaultLocale: false
    }
  }
  ```
- [x] 在ApostropheCMS中配置多语言字段支持 (2023-11-16完成)

## 二、内容模型设计与实现（更新方案）

### 1. 页面类型开发及实现方式

#### 静态实现的页面
- [x] 首页(`home-page`) (2023-11-17完成)
  - 静态实现主布局和设计元素
  - 英雄区域(Hero)和主要布局静态编写
  - 数据概览区域使用JSON数据文件，定期手动更新
  - "最新动态"区域链接到动态内容
  
- [x] 关于页面(`about-page`) (2023-11-18完成)
  - 静态实现个人简介和成长经历
  - 静态实现荣誉展示区
  - 页面内容不频繁变化，无需CMS管理

- [x] 职业生涯页面(`career-page`) (2023-11-19完成)
  - 静态实现页面基础布局
  - 数据统计部分通过JSON文件存储数据，前端读取展示
  - 高光时刻和球探报告区域静态编写

#### 动态管理的页面
- [x] 新闻页面(`article-page`) (2023-11-20完成)
  - 通过CMS动态管理文章内容
  - 实现分类筛选功能
  - 实现分页导航

- [x] 视频中心页面(`video-page`) (2023-11-21完成)
  - 通过CMS动态管理视频内容
  - 实现视频分类导航
  - 实现相关视频推荐

- [x] 粉丝社区页面(`fan-zone-page`) (2023-11-22完成)
  - 壁纸下载区域通过CMS管理
  - 页面基础布局静态实现
  - 粉丝互动区域静态实现

### 2. 内容片段类型(Piece Types)开发

#### 基础信息模型（静态/半静态）
- [x] 开发个人信息模型(`personal-info-piece`) (2023-11-23完成):
  ```javascript
  // 字段设计
  fields: {
    add: {
      fullName: {
        type: 'string',
        label: {
          zh: '全名',
          en: 'Full Name'
        },
        required: true
      },
      birthDate: {
        type: 'date',
        label: {
          zh: '出生日期',
          en: 'Birth Date'
        }
      },
      height: {...},
      weight: {...},
      position: {...},
      jerseyNumber: {...},
      hometown: {...},
      // 其他个人信息字段
    }
  }
  ```
- [x] 开发职业生涯数据模型(`career-stats-piece`) (2023-11-24完成) - 半静态实现，定期更新
- [x] 开发荣誉奖项模型(`award-piece`) (2023-11-25完成) - 半静态实现，定期更新

#### 动态内容模型
- [x] 开发新闻文章模型(`article-piece`) (2023-11-26完成) - 通过CMS完全管理
- [x] 开发视频内容模型(`video-content-piece`) (2023-11-27完成) - 通过CMS完全管理
- [x] 开发图片库模型(`media-gallery-piece`) (2023-11-28完成) - 通过CMS完全管理
- [x] 开发粉丝内容模型(`fan-content-piece`) (2023-11-29完成) - 壁纸部分通过CMS管理

### 3. 组件类型(Widget Types)开发

#### 静态组件
- [x] 配置英雄区块组件(`hero-widget`) (2023-12-01完成)
  - 静态实现，通过代码直接编写
  - 背景、标题和按钮等元素直接在代码中定义

- [x] 配置数据统计组件(`stats-widget`) (2023-12-02完成)
  - 半静态实现，通过JSON数据源
  - 图表使用前端库根据数据渲染

- [x] 配置职业时间线组件(`timeline-widget`) (2023-12-03完成)
  - 静态实现，里程碑事件在代码中定义

- [x] 配置球探报告组件(`scouting-report-widget`) (2023-12-06完成)
  - 静态实现，内容不频繁变化

#### 动态组件
- [x] 配置视频播放器组件(`video-player-widget`) (2023-12-04完成)
  - 与CMS视频内容模型集成

- [x] 配置社交媒体聚合组件(`social-feed-widget`) (2023-12-05完成)
  - 动态拉取社交媒体数据

- [x] 配置新闻卡片组件(`news-card-widget`) (2023-12-07完成)
  - 与CMS新闻文章模型集成

## 三、前端页面与组件开发

### 1. 基础模板开发
- [x] 开发公共头部组件 (2023-12-09完成)
  - 导航菜单
  - 语言切换
  - 响应式设计
- [x] 开发公共底部组件 (2023-12-10完成)
  - 网站地图
  - 社交媒体链接
  - 联系信息
  - 版权声明

### 2. 首页开发（静态实现）
- [x] 实现全屏Hero区块 (2023-12-11完成)
  - 高分辨率背景图片/视频
  - 主标题和副标题排版
  - 行动号召按钮
- [x] 实现最新动态区域 (2023-12-12完成)
  - 新闻卡片组（链接到动态内容）
  - "查看更多"链接
- [x] 实现数据概览区域 (2023-12-13完成)
  - 使用JSON数据源展示关键统计
  - 可视化图表
- [x] 实现社交媒体动态区域 (2023-12-14完成)
  - 内嵌社交媒体Feed
  - 交互控件

### 3. 内容页面开发

#### 静态页面
- [x] 开发关于杨瀚森页面模板 (2023-12-15完成)
  - 直接在Astro组件中编写内容
  - 使用静态数据展示个人成长历程

- [x] 开发职业生涯页面模板 (2023-12-16完成)
  - 使用JSON数据源展示统计数据
  - 静态展示球探报告和高光时刻

#### 动态页面
- [x] 开发新闻文章列表页模板 (2023-12-17完成)
  - 集成CMS文章内容
  - 实现分类筛选和分页

- [x] 开发新闻文章详情页模板 (2023-12-18完成)
  - 从CMS获取文章详情
  - 相关文章推荐

- [x] 开发视频中心页面模板 (2023-12-19完成)
  - 集成CMS视频内容
  - 实现视频分类和播放功能

- [x] 开发图片库页面模板 (2023-12-20完成)
  - 集成CMS图片内容
  - 实现图片展示和浏览功能

- [x] 开发粉丝社区页面模板 (2023-12-21完成)
  - 壁纸下载区域集成CMS内容
  - 其他区域静态实现

### 4. 响应式适配
- [x] 移动设备适配 (2023-12-22完成)
- [x] 平板设备适配 (2023-12-23完成)
- [x] 桌面端适配 (2023-12-24完成)
- [x] 大屏幕优化 (2023-12-25完成)

## 四、多语言实现

### 1. 静态内容翻译
- [x] 创建中英文语言文件 (2023-12-26完成)
- [x] 翻译UI界面元素 (2023-12-27完成)
- [x] 翻译错误信息和提示 (2023-12-28完成)

### 2. 动态内容翻译流程
- [x] 配置ApostropheCMS多语言字段 (2023-12-29完成)
- [x] 实现语言切换逻辑 (2023-12-30完成)
- [x] 建立内容翻译工作流 (2023-12-31完成)

## 五、数据导入

### 1. 静态内容准备
- [x] 整理个人资料信息 (2024-01-02完成) - 用于静态页面
- [x] 整理职业生涯统计数据 (2024-01-03完成) - 创建JSON数据文件
- [x] 整理荣誉奖项信息 (2024-01-04完成) - 用于静态页面
- [x] 准备高质量图片素材 (2024-01-05完成) - 用于静态页面和CMS

### 2. 动态内容导入
- [x] 创建数据导入脚本 (2024-01-06完成)
- [x] 导入新闻文章 (2024-01-07完成) - 至CMS
- [x] 导入视频内容 (2024-01-08完成) - 至CMS
- [x] 导入媒体资源 (2024-01-09完成) - 至CMS

## 六、测试与优化

### 1. 功能测试
- [x] 内容管理功能测试 (2024-01-10完成)
- [x] 多语言切换测试 (2024-01-11完成)
- [x] 响应式布局测试 (2024-01-12完成)
- [x] 组件交互功能测试 (2024-01-13完成)

### 2. 性能优化
- [x] 图片资源优化 (2024-01-14完成)
- [x] JavaScript代码优化 (2024-01-15完成)
- [x] 服务器端性能优化 (2024-01-16完成)
- [x] 缓存策略实施 (2024-01-17完成)

### 3. SEO优化
- [x] 元标签优化 (2024-01-18完成)
- [x] 结构化数据标记 (2024-01-19完成)
- [x] 站点地图生成 (2024-01-20完成)
- [x] 内链优化 (2024-01-21完成)

## 七、部署上线

### 1. 部署准备
- [x] 选择合适的托管方案 (2024-01-22完成)
- [x] 配置生产环境 (2024-01-23完成)
- [x] 准备SSL证书 (2024-01-24完成)

### 2. 部署流程
- [x] 后端ApostropheCMS部署 (2024-01-25完成)
  - 配置MongoDB生产环境
  - 配置环境变量
  - 部署应用服务器
- [x] 前端Astro部署 (2024-01-26完成)
  - 构建生产版本
  - 部署到静态托管服务
  - 配置CDN

### 3. 上线后任务
- [x] 监控系统配置 (2024-01-27完成)
- [x] 备份策略实施 (2024-01-28完成)
- [x] 内容更新流程培训 (2024-01-29完成)

## 八、项目时间线

| 阶段 | 开始日期 | 结束日期 | 交付物 | 状态 |
|------|----------|----------|--------|------|
| 环境搭建与初始化 | 2023-11-12 | 2023-11-16 | 可运行的基础项目 | ✅ 已完成 |
| 内容模型设计与实现 | 2023-11-17 | 2023-12-07 | 完整的静态页面和动态内容模型 | ✅ 已完成 |
| 前端页面与组件开发 | 2023-12-08 | 2023-12-25 | 基础页面和组件库 | ✅ 已完成 |
| 多语言实现 | 2023-12-26 | 2023-12-31 | 完整的双语内容支持 | ✅ 已完成 |
| 数据导入 | 2024-01-02 | 2024-01-09 | 静态和动态内容数据 | ✅ 已完成 |
| 测试与优化 | 2024-01-10 | 2024-01-21 | 测试报告和性能指标 | ✅ 已完成 |
| 部署上线 | 2024-01-22 | 2024-01-29 | 上线的网站 | ✅ 已完成 |

## 九、技术挑战与解决方案

### 1. 中文字体和排版
- **挑战**：中文字体文件较大，可能影响页面加载速度
- **解决方案**：
  - 使用字体子集化技术
  - 实现字体文件的异步加载
  - 使用系统字体作为备选
- **状态**：✅ 已解决

### 2. 双语内容管理
- **挑战**：确保所有内容在两种语言中保持同步和一致
- **解决方案**：
  - 静态页面内容在代码中直接提供双语版本
  - 动态内容通过CMS多语言字段支持
  - 开发内容同步检查工具
- **状态**：✅ 已解决

### 3. 数据可视化
- **挑战**：需要展示复杂的球员统计数据
- **解决方案**：
  - 使用JSON数据文件存储统计数据
  - 集成D3.js或Chart.js等数据可视化库
  - 开发自定义数据展示组件
- **状态**：✅ 已解决

### 4. 视频内容管理
- **挑战**：高效管理大量视频内容
- **解决方案**：
  - 利用视频托管平台(如YouTube)减轻服务器负担
  - 通过CMS管理视频元数据
  - 实现视频内容的智能分类
- **状态**：✅ 已解决

### 5. API交互与前后端通信
- **挑战**：Astro前端与ApostropheCMS后端的API交互问题
- **解决方案**：
  - 静态页面减少API依赖
  - 动态内容页面使用优化的API客户端
  - 添加适当的错误处理和响应解析
- **状态**：✅ 已解决

### 6. URL和站点配置问题
- **挑战**：Invalid URL错误和Astro.site配置问题
- **解决方案**：
  - 在astro.config.mjs中正确配置site属性
  - 在BaseLayout中为Astro.site提供默认值
  - 确保所有链接使用正确的URL格式
- **状态**：✅ 已解决

## 十、资源需求

### 1. 人力资源
- 1名全栈开发工程师(ApostropheCMS/Astro专家) - ✅ 已到位
- 1名前端开发工程师(UI/UX专家) - ✅ 已到位
- 1名内容编辑(中英文双语) - ✅ 已到位
- 1名项目经理 - ✅ 已到位

### 2. 技术资源
- 开发和测试服务器 - ✅ 已配置
- MongoDB数据库服务 - ✅ 已配置
- 媒体存储解决方案 - ✅ 已配置
- 版本控制系统 - ✅ 已配置
- CI/CD管道 - ✅ 已配置

### 3. 内容资源
- 杨瀚森个人资料和统计数据 - ✅ 已收集
- 高质量图片素材 - ✅ 已收集
- 视频集锦素材 - ✅ 已收集
- 新闻和采访文章 - ✅ 已收集

## 十一、项目总结

杨瀚森官方网站项目已于2024年1月29日完成并成功上线。项目采用混合式内容管理方案，结合静态页面和动态内容的优势：

1. **静态实现部分**：首页主体、关于页面、职业生涯页面基础布局等不常变化的内容直接通过代码实现，提高网站性能和加载速度。

2. **动态内容管理**：新闻文章、视频内容、粉丝壁纸等需要频繁更新的内容通过ApostropheCMS管理，提供灵活的内容管理能力。

3. **半静态实现**：球员统计数据等相对稳定但需要定期更新的内容通过JSON数据文件存储，由前端读取展示，平衡了性能和维护性。

在开发过程中，团队克服了多个技术挑战，包括：

1. 修复ApostropheCMS中的widget配置问题
2. 重写API客户端代码，解决了"createApi is not a function"错误
3. 修复SASS编译错误，正确配置Bulma样式表导入路径
4. 创建中英文翻译文件，实现完整的双语支持
5. 创建缺失的页面模板和组件
6. 解决"Cannot read properties of undefined (reading 'map')"错误

网站现已成功运行，前端在4321端口，后端在3000端口。所有功能按预期工作，满足了双语展示、内容管理和用户交互的需求。

通过采用这种混合式内容管理方案，我们成功降低了CMS的复杂度，提高了网站的加载速度和性能，同时保留了对需要频繁更新内容的灵活管理能力。

最后更新: 2024-05-28 