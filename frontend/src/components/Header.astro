---
import { t } from "i18next";
import { localizePath } from "astro-i18next";
import LanguageSwitcher from "./LanguageSwitcher.astro";

interface Props {
  page: any;
}

const { page } = Astro.props;

// 主导航菜单项
const navItems = [
  { href: "/", label: t("nav.home") },
  { href: "/about", label: t("nav.about") },
  { href: "/career", label: t("nav.career") },
  { href: "/articles", label: t("nav.news") },
  { href: "/videos", label: t("nav.videos") },
  { href: "/fan-zone", label: t("nav.fanZone") }
];

// 获取当前路径，用于高亮当前页面
const currentPath = new URL(Astro.request.url).pathname;
---

<header class="navbar is-fixed-top" role="navigation" aria-label={t("nav.main")}>
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href={localizePath("/")}>
        <span class="brand-text">Hansen Yang</span>
        <span class="brand-text-cn">杨瀚森</span>
      </a>
      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="main-navbar">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="main-navbar" class="navbar-menu">
      <div class="navbar-start">
            {navItems.map((item) => (
          <a href={localizePath(item.href)} class={`navbar-item ${currentPath === item.href ? 'is-active' : ''}`}>
            {item.label}
                        </a>
                      ))}
                    </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <LanguageSwitcher />
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // 汉堡菜单交互
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
    
    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
      el.addEventListener('click', () => {
        const target = el.dataset.target;
        const $target = document.getElementById(target);
          
        el.classList.toggle('is-active');
        $target?.classList.toggle('is-active');
      });
    });
  }
  });
</script>